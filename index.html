<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ò–≥—Ä–∞ –®–ø–∏–æ–Ω</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        .screen {
            display: none;
        }
        .visible {
            display: block;
        }
        button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
        }
        .card {
            font-size: 24px;
            margin: 30px 0;
        }
    </style>
</head>
<body>

    <div id="startScreen" class="screen visible">
        <h1>–ò–≥—Ä–∞ "–®–ø–∏–æ–Ω"</h1>
        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤:
            <input type="number" id="playerCount" min="3" max="20" value="6">
        </label><br>
        <button onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
    </div>

    <div id="cardScreen" class="screen">
        <h2>–ò–≥—Ä–æ–∫ <span id="currentPlayer"></span> –∏–∑ <span id="totalPlayers"></span></h2>
        <button onclick="showCard()">–ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</button>
    </div>

    <div id="showCardScreen" class="screen">
        <div class="card" id="cardText">...</div>
        <button onclick="nextPlayer()">–Ø –ø–æ—Å–º–æ—Ç—Ä–µ–ª</button>
    </div>

    <div id="endScreen" class="screen">
        <h2>–í—Å–µ –∏–≥—Ä–æ–∫–∏ –ø–æ—Å–º–æ—Ç—Ä–µ–ª–∏ —Å–≤–æ–∏ –∫–∞—Ä—Ç–æ—á–∫–∏</h2>
        <p>–ú–æ–∂–µ—Ç–µ –Ω–∞—á–∏–Ω–∞—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ!</p>
        <button onclick="location.reload()">–°—ã–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>

    <script>
        const locations = [
            "–õ–∞–±–∞ –≤–∫—É—Å–∞", "–•–∞—Ç–∞ –Ø—Ä–∏–∫–∞", "–ö–æ—Ä–≥–∏—à", "–î–∂–∞–æ –î–∞", "–¶–µ—Ä–∫–æ–≤—å",
            "–ü–æ–¥–∑–µ–ª–µ–Ω—å–µ", "–ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä", "–®–∫–æ–ª–∞", "–ü–æ–µ–∑–¥", "–ê–ª–∫–æ–º–∞—Ä–∫–µ—Ç",
            "–ü–∞—Ä–∫", "–í–∫—É—Å–Ω–æ –∏ —Ç–æ—á–∫–∞", "–ö–∞–±–∞—Ä–¥–∏–Ω–∫–∞", "–†—ã–±–∏–Ω–∫–∞"
        ];

        let players = [];
        let currentPlayerIndex = 0;

        function startGame() {
            const count = parseInt(document.getElementById('playerCount').value);
            if (isNaN(count) || count < 3) {
                alert("–ú–∏–Ω–∏–º—É–º 3 –∏–≥—Ä–æ–∫–∞!");
                return;
            }

            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é –ª–æ–∫–∞—Ü–∏—é –∏ —à–ø–∏–æ–Ω–∞
            const location = locations[Math.floor(Math.random() * locations.length)];
            const spyIndex = Math.floor(Math.random() * count);

            players = Array(count).fill().map((_, i) => i === spyIndex ? "–®–ø–∏–æ–Ω" : location);

            document.getElementById('totalPlayers').textContent = count;
            currentPlayerIndex = 0;

            showScreen("cardScreen");
            updatePlayerNumber();
        }

        function updatePlayerNumber() {
            document.getElementById('currentPlayer').textContent = currentPlayerIndex + 1;
        }

        function showCard() {
            const card = players[currentPlayerIndex];
            const text = card === "–®–ø–∏–æ–Ω" ? "–¢—ã ‚Äî –®–ü–ò–û–ù üëÄ" : `–õ–æ–∫–∞—Ü–∏—è: ${card}`;
            document.getElementById('cardText').textContent = text;
            showScreen("showCardScreen");
        }

        function nextPlayer() {
            currentPlayerIndex++;
            if (currentPlayerIndex >= players.length) {
                showScreen("endScreen");
            } else {
                showScreen("cardScreen");
                updatePlayerNumber();
            }
        }

        function showScreen(screenId) {
            document.querySelectorAll(".screen").forEach(div => div.classList.remove("visible"));
            document.getElementById(screenId).classList.add("visible");
        }
    </script>
</body>
</html>
